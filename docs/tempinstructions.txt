# TEMPINSTRUCTIONS (v2.1 – synkad & rensad)

## 🎯 SYFTE
Bygga en Solana-sniper som reagerar på Cupsyys köp i LaunchLab-pooler.

**Mål:**
- 90–95 % precision
- Total latency < 350 ms
- Daglig riskkontroll och automatiserad loggning

---

## 🧠 STRATEGIMODELL

1. **Prediktiv filtrering** (ML + feature-rules) direkt efter pool-init
2. **Cupsyy-bekräftelse** vid första signatur
3. **Exekvering** innan copytraders via Jito bundle

---

## 🌐 INFRASTRUKTUR

- **Inströmning:** Yellowstone gRPC Geyser (Chainstack)
- **Sändning:** Jito Block Engine (med `x-jito-auth`)
- **Serverplacering:** EU (fsn1/nbg1) med RTT < 20 ms
- **Mål:**  
  - `slot_lag_p90 ≤ 1`  
  - `RTT ≤ 40 ms`  
  - `Kodlatens ≤ 3 ms`

---

## 📈 TRADEPIPELINE (flöde)

1. Pool-init upptäcks → starta feature extraction + ML-score
2. Skapa signerade swaps i minnet med varierande priority-fee
3. Vid Cupsyy-signal → välj optimal bundle, sänd via Jito
4. Exit enligt regler i playbook §D

---

## 🧪 POOLFILTER

Följ playbook §C, med dessa tillägg:

- [x] ML-score `P(Cupsyy) ≥ 0.8` (om modell är laddad)  
  → *Fallback: fortsätt utan ML om modellen saknas*
- [x] RTT mot Jito ≤ 150 ms (övervakas per trade)
- [x] Init-filter timeout ≤ 500 ms

---

## 🚨 RISKKONTROLLER

Bot ska stoppas om något av följande inträffar:

- [ ] Precision senaste 50 trades < 85 %
- [ ] Dags-P&L < –2 % av walletbalans
- [ ] RTT > 150 ms i fler än 3 trades i följd
- [ ] Exekveringspris > 120 % av poolens startpris

**Aktiva begränsningar:**
- Max 2 samtidiga trades per wallet
- Daglig riskcap: 50 SOL

**Precision definition:**  
Andel trades där Cupsyy köpte ≤ 10s före vår exekvering och ROI ≥ 0 %

---

## 📊 KAPITAL & SKALNING

- Start: 0.1–0.5 SOL
- Skala endast efter 100 trades med:
  - [x] Precision ≥ 95 %
  - [x] Nettopositiv ROI
- Följ trade-size logik enligt playbook §A (LP-anpassad, max 10 SOL)
- Kontrollera att varje trade ger ≤ 3 % slippage innan sändning

---

## 🧠 LOGGNING & ML

Per trade:
- `slot_lag`, `fee_ratio`, `rug_score`, `outcome`, latency

Nattlig rapport (exempel):
- Snitt/slut-ROI, precision, slot_lag-stats, median fee
- Rekommendation: skicka till Discord/webhook

ML-rutin:
- Reträna modell & uppdatera aliaslistor var 10:e dag
- Logga fall där ML-score saknas

---

## ⚙️ OPERATIVA RUTINER

- Daglig backup av:
  - Privata nycklar
  - ML-konfig & logs
- Driftstatus-kontroll varje morgon:
  - gRPC-anslutning
  - RTT mot Jito
  - CPU/heap-utilisering
  - Missade bundles

---

## 🔖 SAMMANFATTNING

> Implementera, logga, autotuna – skala först när precision + ROI bevisats i live-miljö.

---

